# DSW-A2

## IP

ip routing

interface l0
ip address 10.0.0.112 255.255.255.255
no shutdown

interface g1/1/1
no switchport
ip address 10.0.0.66 255.255.255.252
no shutdown

interface g1/1/2
no switchport
ip address 10.0.0.82 255.255.255.252
no shutdown

## EtherChannel

interface range g1/0/4-5
shutdown
channel-protocol lacp
channel-group 1 mode active
no shutdown
interface po1
switchport mode trunk
switchport nonegotiate
switchport trunk native vlan 1000
switchport trunk allowed vlan 10,20,50,99,100

## VLANs

vtp mode transparent
vlan 10
name HR_DEPT
vlan 20
name IT_DEPT
vlan 50
name WIFI
vlan 99
name MANAGEMENT
vlan 100
name VOICE

## Trunk Links

interface range g1/0/1-3
switchport mode trunk
switchport nonegotiate
switchport trunk native vlan 1000
switchport trunk allowed vlan 10,20,50,99,100

## Shutdown unused Links

interface range g1/0/6-24, g1/1/3-4
shutdown

## SVIs and HSRP

interface vlan 10
ip address 10.0.10.3 255.255.255.0
no shutdown
standby version 2
standby 10 ip 10.0.10.1
standby 10 preempt

interface vlan 20
ip address 10.0.20.3 255.255.255.0
no shutdown
standby version 2
standby 20 ip 10.0.20.1
standby 20 preempt

interface vlan 100
ip address 10.0.100.3 255.255.255.0
no shutdown
standby version 2
standby 100 ip 10.0.100.1
standby 100 priority 105
standby 100 preempt

interface vlan 50
ip address 10.0.50.3 255.255.255.240
no shutdown
standby version 2
standby 50 ip 10.0.50.1
standby 50 priority 105
standby 50 preempt

interface vlan 99
ip address 10.0.0.3 255.255.255.240
no shutdown
standby version 2
standby 99 ip 10.0.0.1
standby 99 preempt

## Rapid Spanning Tree PVST +

spanning-tree mode rapid-pvst
spanning-tree vlan 10 priority 4096
spanning-tree vlan 20 priority 4096
spanning-tree vlan 50 priority 0
spanning-tree vlan 100 priority 0
spanning-tree vlan 99 priority 0

## ROUTES/OSPF

interface range g1/1/1-2
ip ospf network point-to-point
exit
router ospf 1
network 10.0.0.0 0.0.0.255 area 0
passive-interface l0
passive-interface vlan 10
passive-interface vlan 20
passive-interface vlan 50
passive-interface vlan 100

auto-cost reference-bandwidth 1000000

network 10.0.10.0 0.0.0.255 area 10
network 10.0.20.0 0.0.0.255 area 10
network 10.0.100.0 0.0.0.255 area 10
network 10.0.50.0 0.0.0.255 area 10

## DHCP

int vlan 10
ip helper-address 10.0.70.6
int vlan 20
ip helper-address 10.0.70.6
int vlan 50
ip helper-address 10.0.70.6
int vlan 99
ip helper-address 10.0.70.6
int vlan 100
ip helper-address 10.0.70.6

## NTP Server

clock timezone CET 1
ntp server 10.0.70.7

## Syslog

logging host 10.0.70.8

#ACL

access-list 10 permit 10.0.20.0 0.0.0.255 
access-list 10 deny any

line vty 0 15
access-class 10 in

ip access-list extended HR_ACL
10 deny ip 10.0.10.0 0.0.0.255 10.0.30.0 0.0.0.255

15 deny tcp 10.0.10.0 0.0.0.255 10.0.0.0 0.0.0.255 eq 22
20 permit tcp 10.0.10.0 0.0.0.255 host 10.0.60.4 eq 80
30 permit tcp 10.0.10.0 0.0.0.255 host 10.0.60.4 eq 443

40 permit tcp 10.0.10.0 0.0.0.255 host 10.0.60.5 eq 25
50 permit tcp 10.0.10.0 0.0.0.255 host 10.0.60.5 eq 110

60 permit udp 10.0.10.0 0.0.0.255 host 10.0.70.7 eq 123

70 deny udp 10.0.10.0 0.0.0.255 host 10.0.70.5
80 deny udp 10.0.10.0 0.0.0.255 host 10.0.70.8

90 deny tcp 10.0.10.0 0.0.0.255 host 10.0.70.4

100 permit ip any any

int vlan 10
ip access-group HR_ACL in

---

ip access-list extended IT_ACL

10 permit ip 10.0.20.0 0.0.0.255 10.0.60.0 0.0.0.255
20 permit ip 10.0.20.0 0.0.0.255 10.0.70.0 0.0.0.255

30 permit tcp 10.0.20.0 0.0.0.255 10.0.0.0 0.0.0.255 eq 22

40 permit ip 10.0.20.0 0.0.0.255 10.0.20.0 0.0.0.255
50 permit ip 10.0.20.0 0.0.0.255 10.0.30.0 0.0.0.255
50 permit ip 10.0.20.0 0.0.0.255 10.0.40.0 0.0.0.255

100 permit ip any any

int vlan 20
ip access-group IT_ACL in

#SSH
ip domain-name alancompany
crypto key generate rsa
4096
ip ssh version 2
line vty 0 15
transport input ssh
login local
logging synchronous
exit
username alan secret ccnalab

#Console
line 0
login local