# DSW-B1

## IP

ip routing

interface l0
ip address 10.0.0.113 255.255.255.255
no shutdown

interface g1/1/1
no switchport
ip address 10.0.0.70 255.255.255.252
no shutdown

interface g1/1/2
no switchport
ip address 10.0.0.86 255.255.255.252
no shutdown


## EtherChannel

interface range g1/0/4-5
shutdown
channel-protocol lacp
channel-group 1 mode active
no shutdown
interface po1
switchport mode trunk
switchport nonegotiate
switchport trunk native vlan 1000
switchport trunk allowed vlan 30,40,50,99,100

## VLANs

vtp mode transparent
vlan 30
name SALES_DEPT
vlan 40
name SUPPORT_DEPT
vlan 50
name WIFI
vlan 99
name MANAGEMENT
vlan 100
name VOICE

## Trunk Links

interface range g1/0/1-3
switchport mode trunk
switchport nonegotiate
switchport trunk native vlan 1000
switchport trunk allowed vlan 30,40,50,99,100

## Shutdown unused Links

interface range g1/0/6-24, g1/1/3-4
shutdown

## SVIs and HSRP

interface vlan 30
ip address 10.0.30.2 255.255.255.0
no shutdown
standby version 2
standby 30 ip 10.0.30.1
standby 30 priority 105
standby 30 preempt

interface vlan 40
ip address 10.0.40.2 255.255.255.0
no shutdown
standby version 2
standby 40 ip 10.0.40.1
standby 40 priority 105
standby 40 preempt

interface vlan 100
ip address 10.0.101.2 255.255.255.0
no shutdown
standby version 2
standby 100 ip 10.0.101.1
standby 100 preempt

interface vlan 99
ip address 10.0.0.18 255.255.255.240
no shutdown
standby version 2
standby 99 ip 10.0.0.17
standby 99 preempt

## Rapid Spanning Tree PVST +

spanning-tree mode rapid-pvst
spanning-tree vlan 30 priority 0
spanning-tree vlan 40 priority 0
spanning-tree vlan 100 priority 4096
spanning-tree vlan 99 priority 4096

## ROUTES/OSPF

interface range g1/1/1-2
ip ospf network point-to-point
exit
router ospf 1
network 10.0.0.0 0.0.0.255 area 0
passive-interface l0
passive-interface vlan 30
passive-interface vlan 40
passive-interface vlan 100

auto-cost reference-bandwidth 1000000

network 10.0.30.0 0.0.0.255 area 10
network 10.0.40.0 0.0.0.255 area 10
network 10.0.101.0 0.0.0.255 area 10

## DHCP

int vlan 30
ip helper-address 10.0.70.6
int vlan 40
ip helper-address 10.0.70.6
int vlan 50
ip helper-address 10.0.70.6
int vlan 99
ip helper-address 10.0.70.6
int vlan 100
ip helper-address 10.0.70.6

## NTP Server

clock timezone CET 1
ntp server 10.0.70.7

## Syslog

logging host 10.0.70.8

#ACL

access-list 10 permit 10.0.20.0 0.0.0.255 
access-list 10 deny any

line vty 0 15
access-class 10 in


ip access-list extended SALES_ACL
10 deny ip 10.0.30.0 0.0.0.255 10.0.10.0 0.0.0.255

20 permit tcp 10.0.30.0 0.0.0.255 host 10.0.60.4 eq 80
30 permit tcp 10.0.30.0 0.0.0.255 host 10.0.60.4 eq 443

40 permit tcp 10.0.30.0 0.0.0.255 host 10.0.60.5 eq 25
50 permit tcp 10.0.30.0 0.0.0.255 host 10.0.60.5 eq 110

60 permit udp 10.0.30.0 0.0.0.255 host 10.0.70.7 eq 123

70 deny udp 10.0.30.0 0.0.0.255 host 10.0.70.5
80 deny udp 10.0.30.0 0.0.0.255 host 10.0.70.8

90 deny tcp 10.0.30.0 0.0.0.255 host 10.0.70.4

100 permit ip any any

int vlan 30
ip access-group SALES_ACL in

ip access-list extended SUPPORT_ACL
10 permit tcp 10.0.40.0 0.0.0.255 host 10.0.60.4 eq 80
20 permit tcp 10.0.40.0 0.0.0.255 host 10.0.60.4 eq 443

30 permit tcp 10.0.40.0 0.0.0.255 host 10.0.60.5 eq 25
40 permit tcp 10.0.40.0 0.0.0.255 host 10.0.60.5 eq 110

50 permit udp 10.0.40.0 0.0.0.255 host 10.0.70.7 eq 123

60 deny udp 10.0.40.0 0.0.0.255 host 10.0.70.5
70 deny udp 10.0.40.0 0.0.0.255 host 10.0.70.8

80 deny tcp 10.0.40.0 0.0.0.255 host 10.0.70.4

100 permit ip any any

int vlan 40
ip access-group SUPPORT_ACL in

#SSH
ip domain-name alancompany
crypto key generate rsa
4096
ip ssh version 2
line vty 0 15
transport input ssh
login local
logging synchronous
exit
username alan secret ccnalab

#Console
line 0
login local